html
  head
    meta(http-equiv='content-type', content='text/html; charset=utf-8')
    title StockChart By GetFreakingRich!!
    link(rel='stylesheet', href='amcharts/style.css', type='text/css')
    script(src='amcharts/amcharts.js', type='text/javascript').
    script(src='amcharts/serial.js', type='text/javascript').
    script(src='amcharts/amstock.js', type='text/javascript').
    script(type='text/javascript', src='http://www.amcharts.com/lib/3/themes/none.js').
    script(type='text/javascript').
      var data = !{JSON.stringify(data)};
      var chart = AmCharts.makeChart("chartdiv", {
          "type": "serial",
          "theme": "none",
          "pathToImages": "http://www.amcharts.com/lib/3/images/",
          "valueAxes": [{
          "position": "left"
          }],
          "graphs": [{
          "id": "g1",
          "proCandlesticks": true,
          "balloonText": "Open:<b>[[open]]</b><br>Low:<b>[[low]]</b><br>High:<b>[[high]]</b><br>Close:<b>[[close]]</b><br>",
          "closeField": "close",
          "fillColors": "#7f8da9",
          "highField": "high",
          "lineColor": "#7f8da9",
          "lineAlpha": 1,
          "lowField": "low",
          "fillAlphas": 0.9,
          "negativeFillColors": "#db4c3c",
          "negativeLineColor": "#db4c3c",
          "openField": "open",
          "title": "Price:",
          "type": "candlestick",
          "valueField": "close"
          }],
          "chartScrollbar": {
          "graph": "g1",
          "graphType": "line",
          "scrollbarHeight": 30
          },
          "chartCursor": {
          "valueLineEnabled": true,
          "valueLineBalloonEnabled": true
          },
          "categoryField": "date",
          "categoryAxis": {
          "parseDates": true
          },
          "dataProvider": data
        });
      chart.addListener("rendered", zoomChart);
      zoomChart();
      // this method is called when chart is first inited as we listen for "dataUpdated" event
      function zoomChart() {
      // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
      chart.zoomToIndexes(chart.dataProvider.length - 50, chart.dataProvider.length - 1);
      }
  body
    #chartdiv
  block content
    form#formGetChart(name="getchart",method="get",action="/testest")
    input#inputStockName(type="text", placeholder="e.g ADVANC", name="stockname")
    button#btnSubmit(type="submit") GO!

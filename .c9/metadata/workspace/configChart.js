{"changed":true,"filter":false,"title":"configChart.js","tooltip":"/configChart.js","value":"/**\n * Loads the external CSV file\n */\nAmCharts.loadCSV = function (file) {\n  if (window.XMLHttpRequest) {\n    // IE7+, Firefox, Chrome, Opera, Safari\n    var request = new XMLHttpRequest();\n  } else {\n    // code for IE6, IE5\n    var request = new ActiveXObject('Microsoft.XMLHTTP');\n  }\n  // load\n  try {\n    request.open('GET', file, false);\n    request.send();\n    if (200 != request.status)\n      return [];\n  }\n  catch(e) {\n    return [];\n  }\n  return AmCharts.parseCSV(request.responseText);\n}\n\n/**\n * Parses CSV file\n */\nAmCharts.parseCSV = function (data) {\n  // init empty data array\n  var chartData = []\n\n  //replace UNIX new lines\n  data = data.replace(/\\r\\n/g, \"\\n\");\n  //replace MAC new lines\n  data = data.replace(/\\r/g, \"\\n\");\n  //split into rows\n  var rows = data.split(\"\\n\");\n\n  // first line contains field names\n  var fields = rows.shift().split(\",\");\n\n  // loop through all rows\n  var row;\n  while( row = rows.pop()) {\n    // our columns are separated by comma\n    var column = row.split(\",\");\n\n    // init data object\n    var dataObject = {};\n\n    // add data for all the fields\n    for(var x in column) {\n      dataObject[fields[x]] = column[x];\n    }\n\n    // add object to chartData array\n    chartData.push(dataObject);\n  }\n\n  return chartData;\n}\n\n/**\n * Delay loading by a few moments so that the page has a chace to build itself\n */\n\nsetTimeout(function () {\n\n  /**\n   * Define all data sets\n   */\n  var indices = ['MSFT', 'TXN'];\n  var dataSets = [];\n  for (var x in indices) {\n    // load events\n    var events = AmCharts.loadCSV('/wp-content/uploads/demos/stock/'+indices[x]+'_events.csv');\n    for(var e in events) {\n      switch(events[e].Type) {\n        case 'A':\n          var color = \"#85CDE6\";\n          break;\n        default:\n          var color = \"#cccccc\";\n          break;\n      }\n      events[e].Description = events[e].Description.replace(\"Upgrade\", \"<strong style=\\\"color: #0c0\\\">Upgrade</strong>\").replace(\"Downgrade\", \"<strong style=\\\"color: #c00\\\">Downgrade</strong>\");\n      events[e] = {\n        type: \"pin\",\n        graph: \"g1\",\n        backgroundColor: color,\n        date: events[e].Date,\n        text: events[e].Type,\n        description: \"<strong>\" + events[e].Title + \"</strong><br />\" + events[e].Description\n      };\n    }\n\n    // add data set\n    dataSets.push({\n      title: indices[x],\n      fieldMappings: [{\n        fromField: \"Open\",\n        toField: \"open\"\n      }, {\n        fromField: \"High\",\n        toField: \"high\"\n      }, {\n        fromField: \"Low\",\n        toField: \"low\"\n      }, {\n        fromField: \"Close\",\n        toField: \"close\"\n      }, {\n        fromField: \"Volume\",\n        toField: \"volume\"\n      }],\n      compared: x != 0,\n      dataProvider: AmCharts.loadCSV('/wp-content/uploads/demos/stock/'+indices[x]+'.csv'),\n      categoryField: \"Date\",\n      stockEvents: events\n    });\n  }\n\n  /**\n   * Build the chart\n   */\n  var chart = AmCharts.makeChart(\"chartdiv\", {\n    type: \"stock\",\n    pathToImages: \"http://www.amcharts.com/lib/3/images/\",\n    color: \"#fff\",\n    dataSets: dataSets,\n    dataDateFormat: \"YYYY-MM-DD\",\n\n    panels: [{\n        title: \"Value\",\n        percentHeight: 70,\n\n        stockGraphs: [{\n          type: \"candlestick\",\n          id: \"g1\",\n          openField: \"open\",\n          closeField: \"close\",\n          highField: \"high\",\n          lowField: \"low\",\n          valueField: \"close\",\n          lineColor: \"#fff\",\n          fillColors: \"#fff\",\n          negativeLineColor: \"#db4c3c\",\n          negativeFillColors: \"#db4c3c\",\n          fillAlphas: 1,\n          comparedGraphLineThickness: 2,\n          columnWidth: 0.7,\n          useDataSetColors: false,\n          comparable: true,\n          compareField: \"close\",\n          showBalloon: false,\n          proCandlesticks: true\n        }],\n\n        stockLegend: {\n          valueTextRegular: undefined,\n          periodValueTextComparing: \"[[percents.value.close]]%\"\n        }\n\n      },\n\n      {\n        title: \"Volume\",\n        percentHeight: 30,\n        marginTop: 1,\n        columnWidth: 0.6,\n        showCategoryAxis: false,\n\n        stockGraphs: [{\n          valueField: \"volume\",\n          openField: \"open\",\n          type: \"column\",\n          showBalloon: false,\n          fillAlphas: 1,\n          lineColor: \"#fff\",\n          fillColors: \"#fff\",\n          negativeLineColor: \"#db4c3c\",\n          negativeFillColors: \"#db4c3c\",\n          useDataSetColors: false\n        }],\n\n        stockLegend: {\n          markerType: \"none\",\n          markerSize: 0,\n          labelText: \"\",\n          periodValueTextRegular: \"[[value.close]]\"\n        },\n\n        valueAxes: [{\n          usePrefixes: true\n        }]\n      }\n    ],\n\n    panelsSettings: {\n      color: \"#fff\",\n      plotAreaFillColors: \"#333\",\n      plotAreaFillAlphas: 1,\n      marginLeft: 60,\n      marginTop: 5,\n      marginBottom: 5\n    },\n\n    chartScrollbarSettings: {\n      graph: \"g1\",\n      graphType: \"line\",\n      usePeriod: \"WW\",\n      backgroundColor: \"#333\",\n      graphFillColor: \"#666\",\n      graphFillAlpha: 0.5,\n      gridColor: \"#555\",\n      gridAlpha: 1,\n      selectedBackgroundColor: \"#444\",\n      selectedGraphFillAlpha: 1\n    },\n\n    categoryAxesSettings: {\n      equalSpacing: true,\n      gridColor: \"#555\",\n      gridAlpha: 1\n    },\n\n    valueAxesSettings: {\n      gridColor: \"#555\",\n      gridAlpha: 1,\n      inside: false,\n      showLastLabel: true\n    },\n\n    chartCursorSettings: {\n      pan: true,\n      valueLineEnabled: true,\n      valueLineBalloonEnabled: true\n    },\n\n    legendSettings: {\n      color: \"#fff\"\n    },\n\n    stockEventsSettings: {\n      showAt: \"high\"\n    },\n\n    balloon: {\n      textAlign: \"left\",\n      offsetY: 10\n    },\n\n    periodSelector: {\n      position: \"bottom\",\n      periods: [{\n        period: \"DD\",\n        count: 10,\n        label: \"10D\"\n      }, {\n        period: \"MM\",\n        count: 1,\n        label: \"1M\"\n      }, {\n        period: \"MM\",\n        count: 6,\n        label: \"6M\"\n      }, {\n        period: \"YYYY\",\n        count: 1,\n        label: \"1Y\"\n      }, {\n        period: \"YYYY\",\n        count: 2,\n        selected: true,\n        label: \"2Y\"\n      }, {\n        period: \"YTD\",\n        label: \"YTD\"\n      }, {\n        period: \"MAX\",\n        label: \"MAX\"\n      }]\n    }\n  });\n\n}, 500);","undoManager":{"mark":-1,"position":0,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":0},"end":{"row":168,"column":3}},"text":"});"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":168,"column":0}},"nl":"\n","lines":["var chart = AmCharts.makeChart(\"chartdiv\", {","\ttype: \"stock\",","\t\"theme\": \"none\",","\tpathToImages: \"http://www.amcharts.com/lib/3/images/\",","\tdataSets: [{","\t\tfieldMappings: [{","\t\t\tfromField: \"open\",","\t\t\ttoField: \"open\"","\t\t}, {","\t\t\tfromField: \"close\",","\t\t\ttoField: \"close\"","\t\t}, {","\t\t\tfromField: \"high\",","\t\t\ttoField: \"high\"","\t\t}, {","\t\t\tfromField: \"low\",","\t\t\ttoField: \"low\"","\t\t}, {","\t\t\tfromField: \"volumn\",","\t\t\ttoField: \"volumn\"","\t\t}, {","\t\t\tfromField: \"value\",","\t\t\ttoField: \"value\"","\t\t}],","\t\tcolor: \"#7f8da9\",","\t\tdataProvider: data,","\t\ttitle: \"stockname\",","\t\tcategoryField: \"date\"","\t}, {","\t\tfieldMappings: [{","\t\t\tfromField: \"open\",","\t\t\ttoField: \"open\"","\t\t}, {","\t\t\tfromField: \"close\",","\t\t\ttoField: \"close\"","\t\t}, {","\t\t\tfromField: \"high\",","\t\t\ttoField: \"high\"","\t\t}, {","\t\t\tfromField: \"low\",","\t\t\ttoField: \"low\"","\t\t}, {","\t\t\tfromField: \"volumn\",","\t\t\ttoField: \"volumn\"","\t\t}, {","\t\t\tfromField: \"value\",","\t\t\ttoField: \"value\"","\t\t}],","\t\tcolor: \"#7f8da9\",","\t\tdataProvider: data,","\t\ttitle: \"stock2\",","\t\tcategoryField: \"date\"","\t}, {","\t\tfieldMappings: [{","\t\t\tfromField: \"open\",","\t\t\ttoField: \"open\"","\t\t}, {","\t\t\tfromField: \"close\",","\t\t\ttoField: \"close\"","\t\t}, {","\t\t\tfromField: \"high\",","\t\t\ttoField: \"high\"","\t\t}, {","\t\t\tfromField: \"low\",","\t\t\ttoField: \"low\"","\t\t}, {","\t\t\tfromField: \"volumn\",","\t\t\ttoField: \"volumn\"","\t\t}, {","\t\t\tfromField: \"value\",","\t\t\ttoField: \"value\"","\t\t}],","\t\tcolor: \"#7f8da9\",","\t\tdataProvider: data,","\t\ttitle: \"stock3\",","\t\tcategoryField: \"date\"","\t}],","\tpanels: [{","\t\ttitle: \"Value\",","\t\tshowCategoryAxis: false,","\t\tpercentHeight: 70,","\t\tvalueAxes: [{","\t\t\tid: \"v1\",","\t\t\tdashLength: 5","\t\t}],","\t\tcategoryAxis: {","\t\t\tdashLength: 5","\t\t},","\t\tstockGraphs: [{","\t\t\ttype: \"candlestick\",","\t\t\tid: \"g1\",","\t\t\topenField: \"open\",","\t\t\tcloseField: \"close\",","\t\t\thighField: \"high\",","\t\t\tlowField: \"low\",","\t\t\tvalueField: \"close\",","\t\t\tlineColor: \"#7f8da9\",","\t\t\tfillColors: \"#7f8da9\",","\t\t\tnegativeLineColor: \"#db4c3c\",","\t\t\tnegativeFillColors: \"#db4c3c\",","\t\t\tfillAlphas: 1,","\t\t\tuseDataSetColors: false,","\t\t\tcomparable: true,","\t\t\tcompareField: \"value\",","\t\t\tshowBalloon: false,","\t\t\tproCandlesticks: true","\t\t}],","\t\tstockLegend: {","\t\t\tvalueTextRegular: undefined,","\t\t},","\t\tdrawingIconsEnabled: true","\t}, {","\t\ttitle: \"Volume\",","\t\tpercentHeight: 30,","\t\tmarginTop: 1,","\t\tshowCategoryAxis: true,","\t\tvalueAxes: [{","\t\t\tdashLength: 5","\t\t}],","\t\tcategoryAxis: {","\t\t\tdashLength: 5","\t\t},","\t\tstockGraphs: [{","\t\t\tvalueField: \"volumn\",","\t\t\ttype: \"column\",","\t\t\tshowBalloon: false,","\t\t\tfillAlphas: 1","\t\t}],","\t\tstockLegend: {","\t\t\tmarkerType: \"none\",","\t\t\tmarkerSize: 0,","\t\t\tlabelText: \"\",","\t\t\tperiodValueTextRegular: \"[[value.close]]\"","\t\t}","\t}],","\tchartScrollbarSettings: {","\t\tgraph: \"g1\",","\t\tgraphType: \"line\",","\t\tusePeriod: \"WW\"","\t},","\tchartCursorSettings: {","\t\tvalueLineBalloonEnabled: true,","\t\tvalueLineEnabled: true","\t},","\tdataSetSelector: {","\t\tposition: \"left\"","\t},","\tperiodSelector: {","\t\tselectFromStart: true,","\t\tposition: \"left\",","\t\tperiods: [{","\t\t\tperiod: \"DD\",","\t\t\tcount: 10,","\t\t\tlabel: \"10 days\"","\t\t}, {","\t\t\tperiod: \"MM\",","\t\t\tselected: true,","\t\t\tcount: 1,","\t\t\tlabel: \"1 month\"","\t\t}, {","\t\t\tperiod: \"YY\",","\t\t\tcount: 1,","\t\t\tlabel: \"1 year\"","\t\t}, {","\t\t\tperiod: \"YTD\",","\t\t\tlabel: \"YTD\"","\t\t}]","\t}"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":3}},"text":"/**"},{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":285,"column":0}},"lines":[" * Loads the external CSV file"," */","AmCharts.loadCSV = function (file) {","  if (window.XMLHttpRequest) {","    // IE7+, Firefox, Chrome, Opera, Safari","    var request = new XMLHttpRequest();","  } else {","    // code for IE6, IE5","    var request = new ActiveXObject('Microsoft.XMLHTTP');","  }","  // load","  try {","    request.open('GET', file, false);","    request.send();","    if (200 != request.status)","      return [];","  }","  catch(e) {","    return [];","  }","  return AmCharts.parseCSV(request.responseText);","}","","/**"," * Parses CSV file"," */","AmCharts.parseCSV = function (data) {","  // init empty data array","  var chartData = []","","  //replace UNIX new lines","  data = data.replace(/\\r\\n/g, \"\\n\");","  //replace MAC new lines","  data = data.replace(/\\r/g, \"\\n\");","  //split into rows","  var rows = data.split(\"\\n\");","","  // first line contains field names","  var fields = rows.shift().split(\",\");","","  // loop through all rows","  var row;","  while( row = rows.pop()) {","    // our columns are separated by comma","    var column = row.split(\",\");","","    // init data object","    var dataObject = {};","","    // add data for all the fields","    for(var x in column) {","      dataObject[fields[x]] = column[x];","    }","","    // add object to chartData array","    chartData.push(dataObject);","  }","","  return chartData;","}","","/**"," * Delay loading by a few moments so that the page has a chace to build itself"," */","","setTimeout(function () {","","  /**","   * Define all data sets","   */","  var indices = ['MSFT', 'TXN'];","  var dataSets = [];","  for (var x in indices) {","    // load events","    var events = AmCharts.loadCSV('/wp-content/uploads/demos/stock/'+indices[x]+'_events.csv');","    for(var e in events) {","      switch(events[e].Type) {","        case 'A':","          var color = \"#85CDE6\";","          break;","        default:","          var color = \"#cccccc\";","          break;","      }","      events[e].Description = events[e].Description.replace(\"Upgrade\", \"<strong style=\\\"color: #0c0\\\">Upgrade</strong>\").replace(\"Downgrade\", \"<strong style=\\\"color: #c00\\\">Downgrade</strong>\");","      events[e] = {","        type: \"pin\",","        graph: \"g1\",","        backgroundColor: color,","        date: events[e].Date,","        text: events[e].Type,","        description: \"<strong>\" + events[e].Title + \"</strong><br />\" + events[e].Description","      };","    }","","    // add data set","    dataSets.push({","      title: indices[x],","      fieldMappings: [{","        fromField: \"Open\",","        toField: \"open\"","      }, {","        fromField: \"High\",","        toField: \"high\"","      }, {","        fromField: \"Low\",","        toField: \"low\"","      }, {","        fromField: \"Close\",","        toField: \"close\"","      }, {","        fromField: \"Volume\",","        toField: \"volume\"","      }],","      compared: x != 0,","      dataProvider: AmCharts.loadCSV('/wp-content/uploads/demos/stock/'+indices[x]+'.csv'),","      categoryField: \"Date\",","      stockEvents: events","    });","  }","","  /**","   * Build the chart","   */","  var chart = AmCharts.makeChart(\"chartdiv\", {","    type: \"stock\",","    pathToImages: \"http://www.amcharts.com/lib/3/images/\",","    color: \"#fff\",","    dataSets: dataSets,","    dataDateFormat: \"YYYY-MM-DD\",","","    panels: [{","        title: \"Value\",","        percentHeight: 70,","","        stockGraphs: [{","          type: \"candlestick\",","          id: \"g1\",","          openField: \"open\",","          closeField: \"close\",","          highField: \"high\",","          lowField: \"low\",","          valueField: \"close\",","          lineColor: \"#fff\",","          fillColors: \"#fff\",","          negativeLineColor: \"#db4c3c\",","          negativeFillColors: \"#db4c3c\",","          fillAlphas: 1,","          comparedGraphLineThickness: 2,","          columnWidth: 0.7,","          useDataSetColors: false,","          comparable: true,","          compareField: \"close\",","          showBalloon: false,","          proCandlesticks: true","        }],","","        stockLegend: {","          valueTextRegular: undefined,","          periodValueTextComparing: \"[[percents.value.close]]%\"","        }","","      },","","      {","        title: \"Volume\",","        percentHeight: 30,","        marginTop: 1,","        columnWidth: 0.6,","        showCategoryAxis: false,","","        stockGraphs: [{","          valueField: \"volume\",","          openField: \"open\",","          type: \"column\",","          showBalloon: false,","          fillAlphas: 1,","          lineColor: \"#fff\",","          fillColors: \"#fff\",","          negativeLineColor: \"#db4c3c\",","          negativeFillColors: \"#db4c3c\",","          useDataSetColors: false","        }],","","        stockLegend: {","          markerType: \"none\",","          markerSize: 0,","          labelText: \"\",","          periodValueTextRegular: \"[[value.close]]\"","        },","","        valueAxes: [{","          usePrefixes: true","        }]","      }","    ],","","    panelsSettings: {","      color: \"#fff\",","      plotAreaFillColors: \"#333\",","      plotAreaFillAlphas: 1,","      marginLeft: 60,","      marginTop: 5,","      marginBottom: 5","    },","","    chartScrollbarSettings: {","      graph: \"g1\",","      graphType: \"line\",","      usePeriod: \"WW\",","      backgroundColor: \"#333\",","      graphFillColor: \"#666\",","      graphFillAlpha: 0.5,","      gridColor: \"#555\",","      gridAlpha: 1,","      selectedBackgroundColor: \"#444\",","      selectedGraphFillAlpha: 1","    },","","    categoryAxesSettings: {","      equalSpacing: true,","      gridColor: \"#555\",","      gridAlpha: 1","    },","","    valueAxesSettings: {","      gridColor: \"#555\",","      gridAlpha: 1,","      inside: false,","      showLastLabel: true","    },","","    chartCursorSettings: {","      pan: true,","      valueLineEnabled: true,","      valueLineBalloonEnabled: true","    },","","    legendSettings: {","      color: \"#fff\"","    },","","    stockEventsSettings: {","      showAt: \"high\"","    },","","    balloon: {","      textAlign: \"left\",","      offsetY: 10","    },","","    periodSelector: {","      position: \"bottom\",","      periods: [{","        period: \"DD\",","        count: 10,","        label: \"10D\"","      }, {","        period: \"MM\",","        count: 1,","        label: \"1M\"","      }, {","        period: \"MM\",","        count: 6,","        label: \"6M\"","      }, {","        period: \"YYYY\",","        count: 1,","        label: \"1Y\"","      }, {","        period: \"YYYY\",","        count: 2,","        selected: true,","        label: \"2Y\"","      }, {","        period: \"YTD\",","        label: \"YTD\"","      }, {","        period: \"MAX\",","        label: \"MAX\"","      }]","    }","  });",""]},{"action":"insertText","range":{"start":{"row":285,"column":0},"end":{"row":285,"column":8}},"text":"}, 500);"}]}]]},"ace":{"folds":[],"scrolltop":4565,"scrollleft":0,"selection":{"start":{"row":285,"column":8},"end":{"row":285,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":267,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1413738482227}